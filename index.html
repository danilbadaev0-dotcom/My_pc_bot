<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>PC Remote</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:#0e0f13;color:#eaeaea}
    .wrap{padding:14px;max-width:720px;margin:0 auto}
    h2{font-size:16px;margin:14px 0 8px}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
    .btn{flex:1 1 auto;padding:12px;border-radius:12px;background:#1f232b;border:1px solid #2d3440;text-align:center;cursor:pointer;user-select:none}
    .btn:active{transform:scale(.98)}
    .input{width:100%;padding:12px;border-radius:12px;border:1px solid #2d3440;background:#11151b;color:#eaeaea}
    .kbd{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0}
    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .sw{display:flex;align-items:center;gap:8px;margin:6px 0}
    .section{padding:10px;border:1px solid #2d3440;border-radius:12px;background:#0f1319;margin-bottom:12px}
  </style>
</head>
<body>
<div class="wrap">
  <!-- –ú–µ–¥–∏–∞ –∏ –≥—Ä–æ–º–∫–æ—Å—Ç—å -->
  <div class="section">
    <h2>–ú–µ–¥–∏–∞</h2>
    <div class="row">
      <div class="btn" id="mediaPrev">‚èÆ</div>
      <div class="btn" id="mediaPlay">‚èØ</div>
      <div class="btn" id="mediaNext">‚è≠</div>
    </div>
    <div class="row">
      <div class="btn" id="volDown">üîâ ‚àí</div>
      <div class="btn" id="mute">üîá</div>
      <div class="btn" id="volUp">üîä +</div>
    </div>
  </div>

  <!-- –¢–µ–∫—Å—Ç -> –û—Ç–ø—Ä–∞–≤–∏—Ç—å -->
  <div class="section">
    <h2>–¢–µ–∫—Å—Ç</h2>
    <div class="sw">
      <input id="focusToggle" type="checkbox" />
      <label for="focusToggle">–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç–∞</label>
    </div>
    <input id="textInput" class="input" placeholder="–ù–∞–ø–µ—á–∞—Ç–∞–π —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å" autocomplete="on" />
    <div class="row">
      <div class="btn" id="sendText">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</div>
      <div class="btn" id="paste">–í—Å—Ç–∞–≤–∏—Ç—å (Ctrl+V)</div>
      <div class="btn" id="getClipboard">–°—á–∏—Ç–∞—Ç—å –±—É—Ñ–µ—Ä</div>
    </div>
  </div>

  <!-- –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ -->
  <div class="section">
    <h2>–ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞</h2>
    <div class="kbd">
      <label><input type="checkbox" id="win"> WIN</label>
      <label><input type="checkbox" id="ctrl"> CTRL</label>
      <label><input type="checkbox" id="alt"> ALT</label>
      <label><input type="checkbox" id="shift"> SHIFT</label>
    </div>
    <div class="row">
      <input id="keyField" class="input" placeholder="–ù–∞–ø—Ä.: R, F5, Enter, Tab, Esc..." />
      <div class="btn" id="sendKey" style="flex:0 0 140px">–í—ã–ø–æ–ª–Ω–∏—Ç—å</div>
    </div>

    <!-- –°—Ç—Ä–µ–ª–∫–∏ –∫–∞–∫ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ -->
    <div class="grid3" style="max-width:360px;margin:0 auto 6px">
      <div></div>
      <div class="btn" data-k="up">‚ñ≤</div>
      <div></div>
      <div class="btn" data-k="left">‚óÄ</div>
      <div class="btn" data-k="down">‚ñº</div>
      <div class="btn" data-k="right">‚ñ∂</div>
    </div>

    <div class="grid4">
      <div class="btn" data-k="esc">Esc</div>
      <div class="btn" data-k="tab">Tab</div>
      <div class="btn" data-k="enter">Enter</div>
      <div class="btn" data-k="backspace">Backspace</div>
    </div>
  </div>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();
const el = id => document.getElementById(id);
const send = (type, payload={}) => tg.sendData(JSON.stringify({type, payload}));

// —Ñ–æ–∫—É—Å
const focusToggle = el('focusToggle'), textInput = el('textInput');
const ensureFocus = ()=>{ if(focusToggle.checked) setTimeout(()=>textInput.focus(), 50); };
document.addEventListener('visibilitychange', ensureFocus);
focusToggle.addEventListener('change', ensureFocus);

// –¢–µ–∫—Å—Ç
el('sendText').onclick = ()=> { const t = textInput.value; if(t) send('type_text', {text:t}); };
textInput.addEventListener('keydown', e=>{
  if(e.key==='Enter'){ send('set_clipboard',{text:textInput.value}); send('paste'); e.preventDefault(); }
});
el('paste').onclick        = ()=> send('paste');
el('getClipboard').onclick = ()=> send('get_clipboard');

// –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞
const mod = id => el(id).checked;
function sendKey(k, repeat=1){
  send('send_keys',{
    key:k.toLowerCase(), win:mod('win'), ctrl:mod('ctrl'), alt:mod('alt'), shift:mod('shift'), repeat
  });
  ensureFocus();
}
el('sendKey').onclick = ()=>{
  const raw = el('keyField').value.trim();
  if(raw) sendKey(raw, 1);
};
document.querySelectorAll('[data-k]').forEach(b=> b.onclick = ()=> sendKey(b.getAttribute('data-k')) );

// –ú–µ–¥–∏–∞/–∑–≤—É–∫
el('mediaPrev').onclick = ()=> send('media',  {action:'prev'});
el('mediaPlay').onclick = ()=> send('media',  {action:'playpause'});
el('mediaNext').onclick = ()=> send('media',  {action:'next'});
el('mute').onclick      = ()=> send('toggle_mute');
el('volDown').onclick   = ()=> send('volume', {action:'down', repeat:2});
el('volUp').onclick     = ()=> send('volume', {action:'up',   repeat:2});
</script>
</body>
</html>
